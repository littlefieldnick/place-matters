<div class="container"
     fxLayout="row wrap"
     fxLayoutAlign="center"
     fxLayoutGap="10px"
     style="padding-top: 10px">
    <div fxFlex="70%" fxLayout="column wrap">
        <h1 class="mat-headline" style="color:indigo">Upload List of Resources</h1>
        <mat-divider></mat-divider>

        <mat-horizontal-stepper linear="true" #stepper>
            <mat-step label="Select County" [stepControl]="countyFormStep">
                <mat-label>Select a County:</mat-label>
                <form [formGroup]="countyFormStep">
                    <mat-radio-group formControlName="county" class="csv-radio-group">
                        <div *ngFor="let cty of countyListing">
                            <mat-radio-button value="{{cty.name}}" class="csv-radio-button">
                                {{cty.name}}
                            </mat-radio-button>
                        </div>
                    </mat-radio-group>

                    <div style="padding-top:10px;">
                        <button mat-raised-button color="primary" matStepperNext >Next</button>
                    </div>
                </form>
            </mat-step>
            <mat-step label="Upload CSV File" [stepControl]="csvFormStep">
                <h1 class="mat-headline">Select CSV File {{countyFormStep.controls["county"].value}}</h1>
                <form [formGroup]="csvFormStep">
                    <input type="file" #file style="display: none" (change)="onFilesAdded($event)" accept="text/csv"/>
                    <button [disabled]="uploading" mat-raised-button color="primary" class="add-files-btn" (click)="addFiles()">
                        Add File
                    </button>
                </form>

                <mat-card *ngIf="csvFormStep.controls['csv'].value">
                    <mat-card-content>
                        {{csvFormStep.controls['csv'].value.name}}

                        <mat-progress-bar *ngIf="progress" mode="determinate" [value]="progress[file.name].progress | async">
                        </mat-progress-bar>
                    </mat-card-content>
                </mat-card>

<!--                <div>-->
<!--                    <button *ngIf="this.csvFormStep.controls['csv'].value.length > 0 && !this.uploadSuccessful" mat-raised-button color="primary" (click)="uploadFiles()">Upload File(s)</button>-->
<!--                </div>-->
                <div style="padding-top:10px;">
                    <button  mat-raised-button color="primary" matStepperNext >Next</button>
                </div>
            </mat-step>
            <mat-step label="Map Columns">
                <h1 class="mat-headline">Map CSV Fields</h1>
                <p>Select the corresponding field that matches each of the CSV fields.</p>
                <table mat-table [dataSource]="this.dataSource">
                    <ng-container matColumnDef="csvColumn">
                        <th mat-header-cell *matHeaderCellDef> CSV Column Name </th>
                        <td mat-cell *matCellDef="let element"> {{element.header}} </td>
                    </ng-container>

                    <ng-container matColumnDef="example">
                        <th mat-header-cell *matHeaderCellDef> Example Row </th>
                        <td mat-cell *matCellDef="let element"> {{element.exampleVal}} </td>
                    </ng-container>

                    <ng-container matColumnDef="dbColumn">
                        <th mat-header-cell *matHeaderCellDef> Database Column to Store Value </th>
                        <td mat-cell *matCellDef="let element"> {{element}} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>

            </mat-step>
            <mat-step label="Complete Upload">

            </mat-step>
        </mat-horizontal-stepper>
    </div>
</div>
